#:include generalcontrolpage.kv
#:include advancedcontrolpage.kv

#:import NoTransition kivy.uix.screenmanager.NoTransition
#:import hex kivy.utils.get_color_from_hex
#:import Factory kivy.factory.Factory
#:set red [255, 0.5, 0.5, 0.95]
#:set green [0.5, 255, 0.5, 0.95]
#:set default [1, 1, 1, 0.95]


# red: [255, 100/255, 100/255, .85], gray: [255/255, 255/255, 255/255, .95], green: [180/255, 255/255, 180/255, .95]


<Label>
    size_hint: 0.1,0.1
    font_size:sp(20)
    color: 0,0,0,1
<LimitInput>
    font_size:sp(20)
    padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]     # Centering the text
    halign: "center"
#<MDRaisedButton>
#    size_hint:0.26,0.08
#    font_size:sp(18)
#    ripple_scale: 0
#    theme_text_color: 'Primary'
#    text_color: [0,0,0,1]
<Button>
    background_normal: ""
    background_down: ""
    background_color: [166/255, 166/255, 166/255, 1]
    size_hint:0.26,0.1
    background_color: default

<PasswordPopUp@Popup>
    auto_dismiss: True
    id: popup
    password: password
    title: "Password | Şifre"
    title_size: 22
    size_hint: 0.5, 0.2
    FloatLayout:
        password: password
        TextInput:
            id: password
            multiline: False
            password: True
            size_hint: 0.8, 0.8
            font_size:20.5
            pos_hint: {"x":0.0, "center_y":0.5}
        Button:
            text: "Enter"
            size_hint: 0.2, 0.8
            background_color: [166/255, 166/255, 166/255, 1]
            pos_hint: {"x":0.8, "center_y":0.5}
            on_release:
                popup.test()
                if password.text == "AsDq08333600": popup.dismiss()

ScreenManager:
    transition: NoTransition()
    id: screen_manager

#########################################################################

    BlankPage:
        screen_manager: screen_manager
        id: blank
        canvas.before:
            Color:
                rgba: (1, 1, 1, 1)
            Rectangle:
                pos:self.pos
                size:self.size


#########################################################################

    GeneralControlPage:

        r_prc1: r_prc1
        s_prc1: s_prc1
        t_prc1: t_prc1
        screen_manager: screen_manager
        box: box
        status: status
        status3: status3

        FloatLayout:
            GridLayout:
                size_hint: 0.23, 0.10
                pos_hint: {"x": 0.01, "y": 0.0177}
                rows: 1
                cols: 2
                Button:
                    text:"Ayarlar "
                    background_normal: "atlas://data/images/defaulttheme/button"
                    size_hint_x: 0.75
                    on_release:
                        Factory.PasswordPopUp().open()
                        # advancedcontrol.thread_pause = True
                        # app.root.current = 'optionpage'
                Image:
                    id: status3
                    source: "cross.png"
                    size_hint_x: 0.25

            GridLayout:
                rows:2
                cols:3
                size_hint: 0.23, 0.07
                pos_hint: {"x": 0.027, "y": 0.26}

                Label:
                    text: "L1"
                    text_size: self.size
                    halign: "left"

                Label:
                    text: "L2"
                    text_size: self.size
                    halign: "left"

                Label:
                    text: "L3"
                    text_size: self.size
                    halign: "left"

                Label:
                    id: r_prc1
                    text: "%-"
                    text_size: self.size
                    halign: "left"

                Label:
                    id: s_prc1
                    text: "%-"
                    text_size: self.size
                    halign: "left"

                Label:
                    id: t_prc1
                    text: "%-"
                    text_size: self.size
                    halign: "left"


#########################################################################

    AdvancedControlPage:
        name: 'advancedcontrolpage'
        id: advancedcontrol
        screen_manager: screen_manager
        box: box
        status: status
        status2: status2

        r_prc2: r_prc2
        s_prc2: s_prc2
        t_prc2: t_prc2


        FloatLayout:
            GridLayout:
                size_hint: 0.23, 0.099
                pos_hint: {"x": 0.01, "y": 0.0177}
                rows: 1
                cols: 2
                Button:
                    text:"Ayarlar "
                    background_normal: "atlas://data/images/defaulttheme/button"
                    size_hint_x: 0.75
                    on_release:
                        Factory.PasswordPopUp().open()
                        # advancedcontrol.thread_pause = True
                        # app.root.current = 'optionpage'
                Image:
                    id: status2
                    source: "cross.png"
                    size_hint_x: 0.25

            GridLayout:
                rows:2
                cols:3
                size_hint: 0.23, 0.07
                pos_hint: {"x": 0.027, "y": 0.26}

                Label:
                    text: "L1"
                    text_size: self.size
                    halign: "left"

                Label:
                    text: "L2"
                    text_size: self.size
                    halign: "left"

                Label:
                    text: "L3"
                    text_size: self.size
                    halign: "left"

                Label:
                    id: r_prc2
                    text: "%-"
                    text_size: self.size
                    halign: "left"

                Label:
                    id: s_prc2
                    text: "%-"
                    text_size: self.size
                    halign: "left"

                Label:
                    id: t_prc2
                    text: "%-"
                    text_size: self.size
                    halign: "left"

#########################################################################


    OptionPage:
        name: 'optionpage'
        id: option

        # OptionPage IDs
        box: box
        status: status
        status2: status2
        checkbox_general: checkbox_general
        checkbox_advanced: checkbox_advanced


        canvas.before:
            Color:
                rgba: (1, 1, 1, 1)
            Rectangle:
                pos:self.pos
                size:self.size

        FloatLayout:

            Label:
                text: "IP:"
                font_size: 24
                pos_hint: {"x": 0.165, "y": 0.8}
            TextInput:
                id: box
                font_size: 24
                text: ""
                multiline: False
                size_hint: 0.5,0.1
                pos_hint: {"x": 0.265, "y": 0.8}
            Button:
                text:"Kaydet"
                background_normal: "atlas://data/images/defaulttheme/button"
                size_hint: 0.1,0.1
                pos_hint: {"x": 0.785, "y": 0.8}
                on_release:
                    option.save_ip()

            GridLayout:
                size_hint: 0.4, 0.2
                pos_hint: {"x": 0.385, "y": 0.5}
                cols: 2
                rows: 2

                CheckBox:
                    id: checkbox_general
                    group: "buttons"
                    on_active: option.pagestatus("General")
                    size_hint: None, None
                    size: (50, 25)
                    #pos_hint: {"center_x": 0.5, "center_y": 0.55}
                    color: 0, 0, 0, 1
                Label:
                    text: "Basit Görünüm"
                    text_size: self.size
                    size_hint: 0.25, 0.1
                    # font_size: 30
                    # pos_hint: {"center_x": 0.64, "center_y": 0.582}

                CheckBox:
                    id: checkbox_advanced
                    group: "buttons"
                    on_active: option.pagestatus("Advanced")
                    size_hint: None, None
                    size: (50, 25)
                    on_active: print(self.size)
                    #pos_hint: {"center_x": 0.5, "center_y": 0.45}
                    color: 0, 0, 0, 1
                Label:
                    text: "Gelişmiş Görünüm"
                    text_size: self.size
                    size_hint: 0.25, 0.1
                    # font_size: 30
                    # pos_hint: {"center_x": 0.64, "center_y": 0.482}

            Image:
                id: status
                source: "cross.png"
                size_hint: 0.1,0.1
                pos_hint: {"x": 0.885, "y": 0.8}

            Button:
                text:"Geri"
                background_normal: "atlas://data/images/defaulttheme/button"
                size_hint: 0.2,0.1
                pos_hint: {"x": 0.385, "y": 0.1}
                on_release:
                    option.back()

            # Button:
            #     text:"Thread Number"
            #     size_hint: 0.2,0.1
            #     pos_hint: {"x": 0.385, "y": 0.2}
            #     on_release:
            #         option.thread_number()
